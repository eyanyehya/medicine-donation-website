{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_filters %}
{% load app_template_tags %}
{% block title %}Post Detail{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'css/form.css' %}">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" href="{% static 'css/map.css' %}"/>
    <script src="{% static 'javascript/map.js' %}"></script>
{% endblock %}
{% block content %}

    <style>
        .asteriskField {
            display: none;
        }
    </style>

    {#    <form method="post" enctype="multipart/form-data">#}
    {#        {% csrf_token %}#}
    {##}
    {#        <div class="form">#}
    {#            <div class="title">Edit Post</div>#}
    {#            <div class="title"> تعديل المنشور</div>#}
    {#            <div class="input-container ic3">#}
    {#                I want to {{ form.post_type }} medicine.#}
    {#            </div>#}
    {#            <div class="input-container ic1">#}
    {#                <input id="{{ form.medicine_name.id_for_label }}" name="{{ form.medicine_name.html_name }}" class="input" type="text" placeholder=" " value="{{ form.medicine_name.value|default_if_none:"" }}"/>#}
    {#                <div id="medicine_name-pop-up" class="cut"></div>#}
    {#                <label for="{{ form.medicine_name.id_for_label }}" class="placeholder">Medicine Name</label>#}
    {#            </div>#}
    {#            <div class="input-container ic2">#}
    {#                <input id="{{ form.medicine_quantity.id_for_label }}" name="{{ form.medicine_quantity.html_name }}" class="input" type="number" placeholder=" " value="{{ form.medicine_quantity.value|default_if_none:"" }}"/>#}
    {#                <div id="medicine_quantity-pop-up" class="cut"></div>#}
    {#                <label for="{{ form.medicine_quantity.id_for_label }}" class="placeholder">Quantity</label>#}
    {#            </div>#}
    {#            <div class="input-container ic1">#}
    {#                <input id="{{ form.phone_number.id_for_label }}" name="{{ form.phone_number.html_name }}" class="input" type="text" placeholder=" " value="{{ form.phone_number.value|default_if_none:"" }}"/>#}
    {#                <div id="phone_number-pop-up" class="cut"></div>#}
    {#                <label for="{{ form.phone_number.id_for_label }}" class="placeholder">Phone Number</label>#}
    {#            </div>#}
    {#            <div class="input-container ic2">#}
    {#                <input id="address" name="{{ form.address.html_name }}" class="input" type="text" placeholder=" " value="{{ form.address.value|default_if_none:"" }}"/>#}
    {#                <div id="address-pop-up" class="cut cut-short"></div>#}
    {#                <label for="{{ form.address.id_for_label }}" class="placeholder">Address</label>#}
    {#            </div>#}
    {#            <br>#}
    {#            <div style="color: white">Please fill in the expiry date <u>only if you are making a donation</u></div>#}
    {#            <div style="color: white"> يرجى ملء تاريخ انتهاء الصلاحية فقط إذا كنت تقوم بالتبرع</div>#}
    {#            <div style="color: white">Make sure that date is written as <u>YYYY-MM-DD</u> if on computer</div>#}
    {#            <div style="color: white"><u>YYYY-MM-DD</u>  إذا كنت تستخدم جهاز الكمبيوتر تأكد من كتابة هذا التاريخ بالصيغة  </div>#}
    {#            <div class="input-container ic2">#}
    {#                <input id="{{ form.expiry_date.id_for_label }}" name="{{ form.expiry_date.html_name }}" class="input" type="date" placeholder=" " value="{{ form.expiry_date.value|date:'Y-m-d'}}"/>#}
    {#                <div id="expiry_date-pop-up" class="cut"></div>#}
    {#                <label for="{{ form.expiry_date.id_for_label }}" class="placeholder">Expiry Date</label>#}
    {#            </div>#}
    {##}
    {#            <br/>#}
    {#            <div class="image">#}
    {#                {{ form.medicine_image }}#}
    {#            </div>#}
    {#            <button type="submit" value="Update" class="submit">Update</button>#}
    {#        </div>#}
    {#    </form>#}




    {##}
    {#    <form method="post" enctype="multipart/form-data">#}
    {#        {% csrf_token %}#}
    {##}
    {#        <div class="sign-up-form">#}
    {#            <div style="text-align: center;">#}
    {#                <div class="title">Edit Post</div>#}
    {#            </div>#}
    {#            <div style="text-align: center;">#}
    {#                <div class="title">منشور جديد</div>#}
    {#            </div>#}
    {##}
    {##}
    {#            <div class="input-container ic3">#}
    {#                I want to {{ form.post_type }} medicine.#}
    {#            </div>#}
    {#            <div class="input-container ic1">#}
    {#                <div style="color: white">Medicine Name</div>#}
    {#                <input id="{{ form.medicine_name.id_for_label }}" name="{{ form.medicine_name.html_name }}"#}
    {#                       class="input" type="text" placeholder="Medicine Name"#}
    {#                       value="{{ form.medicine_name.value|default_if_none:"" }}"/>#}
    {#            </div>#}
    {#            <div class="input-container ic2">#}
    {#                <div style="color: white">Medicine Quantity</div>#}
    {#                <input id="{{ form.medicine_quantity.id_for_label }}" name="{{ form.medicine_quantity.html_name }}"#}
    {#                       class="input" type="number" placeholder="Quantity"#}
    {#                       value="{{ form.medicine_quantity.value|default_if_none:"" }}"/>#}
    {#            </div>#}
    {#            <div class="input-container ic1">#}
    {#                <div style="color: white">Phone Number</div>#}
    {#                <input id="{{ form.phone_number.id_for_label }}" name="{{ form.phone_number.html_name }}" class="input"#}
    {#                       type="text" placeholder="Phone Number" value="{{ form.phone_number.value|default_if_none:"" }}"/>#}
    {#            </div>#}
    {#            <div class="input-container ic2">#}
    {#                <div style="color: white">Address</div>#}
    {#                <input id="address" name="{{ form.address.html_name }}" class="input" type="text" placeholder="Address"#}
    {#                       value="{{ form.address.value|default_if_none:"" }}"/>#}
    {#            </div>#}
    {#            <br>#}
    {#            <div style="color: white">Please fill in the expiry date only if you are making a donation</div>#}
    {#            <div style="color: white">Make sure that the date is written as <u>YYYY-MM-DD</u> if on computer</div>#}
    {#            <div class="input-container ic2">#}
    {#                <div style="color: white">Expiry Date</div>#}
    {#                <input id="{{ form.expiry_date.id_for_label }}" name="{{ form.expiry_date.html_name }}" class="input"#}
    {#                       type="date" placeholder="Expiry Date" value="{{ form.expiry_date.value|default_if_none:"" }}"/>#}
    {#            </div>#}
    {#            <br>#}
    {#            <div class="input-container ic3">#}
    {#                Upload Image#}
    {#            </div>#}
    {#            <div class="image">#}
    {#                {{ form.medicine_image }}#}
    {#            </div>#}
    {##}
    {#            <button type="submit" value="submit address" class="submit">Post</button>#}
    {#        </div>#}
    {#    </form>#}
{##}
{#    <style>#}
{#        html, body {#}
{#            width: 100%;#}
{#            height: 100%;#}
{#            margin: 0px;#}
{#            padding: 0px;#}
{#            overflow-x: hidden;#}
{#        }#}
{#    </style>#}
{##}
{#    <div style="width: 100%" class="col d-flex justify-content-center">#}
{#        <div class="card border-dark mb-3" style="width: 30rem; margin-top: 2vh; margin-left: 2vh; margin-right: 2vh">#}
{#            <div class="card-header">#}
{#                <div style="text-align: left; margin-top: 5vh">#}
{#                    <h1 style="font-family: sans-serif;font-size: 25px;font-weight: 600;">Edit Post</h1>#}
{#                </div>#}
{#            </div>#}
{#            <div class="card-body" style="margin-top: -2vh; margin-bottom: -3vh">#}
{#                <p class="card-text">#}
{#                <form method="post" enctype="multipart/form-data">#}
{#                    {% csrf_token %}#}
{#                    <ul class="list-group list-group-flush">#}
{#                        <li class="list-group-item">#}
{#                            <div class="alert alert-info" role="alert">#}
{#                                Not sure what to write? <a class="alert-link" data-bs-toggle="offcanvas"#}
{#                                                           href="#offcanvasExample">More Information</a>#}
{#                            </div>#}
{#                        </li>#}
{#                        <li class="list-group-item">{{ form.post_type|as_crispy_field }}</li>#}
{#                        <li class="list-group-item">#}
{#                            <div class="row">#}
{#                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">#}
{#                                    {{ form.medicine_name|as_crispy_field }}#}
{#                                </div>#}
{#                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">#}
{#                                    {{ form.medicine_quantity|as_crispy_field }}#}
{#                                </div>#}
{#                            </div>#}
{#                        </li>#}
{#                        <li class="list-group-item">#}
{#                            {{ form.phone_number|as_crispy_field }}#}
{#                            {{ form.expiry_date|as_crispy_field }}#}
{#                        </li>#}
{#                        <li class="list-group-item">#}
{#                            <div style="margin-top: 1vh" class="row">#}
{#                                <div class="mb-3">#}
{#                                    <label for="exampleFormControlInput1" class="form-label">Address</label>#}
{#                                    <input id="address" class="form-control" name="{{ form.address.html_name }}"#}
{#                                           type="text"#}
{#                                           value="{{ form.address.value|default_if_none:"" }}"/>#}
{#                                </div>#}
{#                            </div>#}
{#                        </li>#}
{#                        <li class="list-group-item">#}
{#                            <div style="margin-bottom: -2vh; margin-top: 2vh"#}
{#                                 class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">#}
{#                                {{ form.medicine_image|as_crispy_field }}#}
{#                            </div>#}
{#                        </li>#}
{#                    </ul>#}
{#                    <br>#}
{#                    <br>#}
{#                    <div style="margin-bottom: 5vh" class="d-grid gap-2">#}
{#                        <button class="btn btn-success" type="submit">Confirm</button>#}
{#                    </div>#}
{#                </form>#}
{#                </p>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{##}
{#    <script>#}
{#        let address;#}
{##}
{#        function initAutocomplete() {#}
{#            address = new google.maps.places.Autocomplete(#}
{#                document.getElementById('address'),#}
{#                {#}
{#                    componentRestrictions: {'country': ['LB']},#}
{#                    fields: ['name']#}
{#                }#}
{#            );#}
{#        }#}
{#    </script>#}
{##}
{##}
    {#    <div id="map"></div>#}
{##}
{#    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->#}
{#    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDONGu-q34eWXxxV_eS4wpaT5RpB4kHyZk&libraries=places&callback=initAutocomplete"#}
{#            async#}
{#            defer>#}
{#    </script>#}
{##}
<style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px;
            overflow-x: hidden;
        }
    </style>


    <div style="width: 100%" class="col d-flex justify-content-center">
        <div class="card border-dark mb-3" style="width: 30rem; margin-top: 2vh; margin-left: 2vh; margin-right: 2vh">
            <div class="card-header">
                <div style="text-align: left; margin-top: 5vh">
                    <h1 style="font-family: sans-serif;font-size: 25px;font-weight: 600;">Edit Post</h1>
                </div>
            </div>
            <div class="card-body" style="margin-top: -2vh; margin-bottom: -3vh">
                <p class="card-text">
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <div class="alert alert-info" role="alert">
                                Not sure what to write?
                                <br>
                                <a class="alert-link" data-bs-toggle="offcanvas"
                                                           href="#offcanvasExample">More Information</a>
                            </div>
                        </li>
                        <li class="list-group-item">{{ form.post_type|as_crispy_field }}</li>
                        <li class="list-group-item">
                            <div class="row">
                                <div style="margin-bottom: 1vh" class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-6"
                                     id="name">
                                    {{ form.medicine_name|as_crispy_field }}
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
                                    {{ form.medicine_quantity|as_crispy_field }}
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div style="margin-bottom: 1vh">{{ form.phone_number|as_crispy_field }}</div>
                            <div style="margin-top: 1vh">{{ form.expiry_date|as_crispy_field }}</div>
                        </li>
                        <li class="list-group-item">
                            <div style="margin-top: 1vh" class="row">
                                <div class="mb-3">
                                    <p style="color: black; margin-top: -0.5vh; margin-bottom: -0.1vh; text-align: center">
                                        Address</p>
                                    <input id="address" class="form-control" name="{{ form.address.html_name }}"
                                           type="text"
                                           value="{{ form.address.value|default_if_none:"" }}" required/>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            {{ form.extra_info|as_crispy_field }}
                        </li>
                        <li class="list-group-item">
                            <div style="margin-bottom: -2vh; margin-top: 2vh">
                                {{ form.medicine_image|addcss:"form-control" }}
                            </div>
                        </li>
                    </ul>
                    <br>
                    <br>
                    <div style="margin-bottom: 5vh" class="d-grid gap-2">
                        <button class="btn btn-success" type="submit">Post</button>
                    </div>
                </form>
                {% include 'bootstrap4/layout/help_text_and_errors.html' %}
                </p>
            </div>
        </div>
    </div>
    {##}
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel"><b>Creating Post</b></h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div>
                <b><u>Post Type</u></b>
                <br>
                If you are <u>donating</u> medicine select <b>Donation</b>
                <br>
                If you are <u>requesting</u> medicine select <b>Request</b>

                <br>
                <br>
                <b><u>Medicine Name</u></b>
                <br>
                The name of the medicine you are donating or requesting
                <br>
                eg. Panadol

                <br>
                <br>
                <b><u>Medicine Quantity</u></b>
                <br>
                The amount of medicine you are donating or requesting
                <br>
                eg. 5

                <br>
                <br>
                <b><u>Phone Number</u></b>
                <br>
                The phone number you want to use when contacting others
                <br>
                eg. +12125552368
                <br>
                <br>
                <b><u>Address</u></b>
                <br>
                The address where you want the exchange to take place.

                <br>
                <br>
                <b><u>Expiry Date</u></b>
                <br>
                <b>Only fill this out if you are donating medicine</b>
                <br>
                The date when the medicine expires
            </div>
        </div>
    </div>

    <script>
        let address;

        function initAutocomplete() {
            address = new google.maps.places.Autocomplete(
                document.getElementById('address'),
                {
                    componentRestrictions: {'country': ['LB']},
                    fields: ['name']
                }
            );
        }
    </script>


    {#    <div id="map"></div>#}

    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script src="https://maps.googleapis.com/maps/api/js?key={{ google_key }}&libraries=places&callback=initAutocomplete"
            async
            defer>
    </script>




{% endblock content %}
